<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Oscar & Sara ¬∑ 17 de Julio de 2027</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500&family=Jost:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --cream:#fdf8f2;--blush:#e8c4b4;--rose:#c4896a;
  --dusty-rose:#d4a593;--dark-sage:#5c7056;--mauve:#9b7b76;
  --text-dark:#3a2e2b;--text-mid:#6b534e;--text-light:#9b8480;
  --dark:#2a2018;
}
/* ocultaci√≥n cuando NO asiste: oculta todo menos el nombre y el bot√≥n */
.rsvp-form.is-declined .form-section-title{ display:none !important; }
.rsvp-form.is-declined .form-group{ display:none !important; }
.rsvp-form.is-declined .form-group:first-of-type{ display:block !important; } /* nombre */
.rsvp-form.is-declined .form-group.attendance-group{ display:block !important; } /* asistencia */
.rsvp-form.is-declined .btn-submit{ display:block !important; }

*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--cream);color:var(--text-dark);font-family:'Jost',sans-serif;font-weight:300;overflow-x:hidden;width:100%;max-width:100vw;}

/* ‚îÄ‚îÄ SECCIONES ‚îÄ‚îÄ */
section{padding:100px 24px;position:relative;width:100%}
.section-inner{max-width:720px;margin:0 auto;text-align:center}
h2.section-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,5vw,2.8rem);font-weight:400;color:var(--text-dark);margin-bottom:.5rem;letter-spacing:.02em}
.subtitle{font-size:.78rem;letter-spacing:.22em;text-transform:uppercase;color:var(--text-light);margin-bottom:.6rem}
p.body-text{font-size:1rem;line-height:1.85;color:var(--text-mid)}
.floral-divider{display:flex;align-items:center;justify-content:center;gap:14px;margin:2rem 0;opacity:.6}
.floral-divider svg{width:24px;height:24px;flex-shrink:0}
.floral-divider::before,.floral-divider::after{content:'';display:block;height:1px;width:60px;background:linear-gradient(to right,transparent,var(--rose))}
.floral-divider::after{background:linear-gradient(to left,transparent,var(--rose))}

/* ‚îÄ‚îÄ REVEAL ‚îÄ‚îÄ */
.reveal-up{opacity:0;transform:translateY(50px);transition:opacity .9s cubic-bezier(.16,1,.3,1),transform .9s cubic-bezier(.16,1,.3,1)}
.reveal-left{opacity:0;transform:translateX(-60px);transition:opacity .9s cubic-bezier(.16,1,.3,1),transform .9s cubic-bezier(.16,1,.3,1)}
.reveal-right{opacity:0;transform:translateX(60px);transition:opacity .9s cubic-bezier(.16,1,.3,1),transform .9s cubic-bezier(.16,1,.3,1)}
.reveal-scale{opacity:0;transform:scale(.88);transition:opacity 1s cubic-bezier(.16,1,.3,1),transform 1s cubic-bezier(.16,1,.3,1)}
[class*="reveal-"].visible{opacity:1;transform:none}
.delay-1{transition-delay:.1s}.delay-2{transition-delay:.22s}.delay-3{transition-delay:.36s}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
#hero{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px;background:var(--cream);position:relative;overflow:hidden;}
#hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 70% 55% at 12% 18%,rgba(232,196,180,.4) 0%,transparent 60%),radial-gradient(ellipse 55% 45% at 90% 78%,rgba(196,137,106,.22) 0%,transparent 55%),radial-gradient(ellipse 50% 40% at 55% 8%,rgba(138,158,132,.2) 0%,transparent 50%);pointer-events:none;}
.hero-content{position:relative;text-align:center;z-index:1;width:100%}
.hero-pre{font-size:.72rem;letter-spacing:.3em;text-transform:uppercase;color:var(--rose);margin-bottom:1.8rem;animation:fadeUp 1.2s .2s ease both;opacity:0}
.hero-names{font-family:'Cormorant Garamond',serif;font-size:clamp(3.8rem,13vw,9rem);font-weight:300;line-height:.92;color:var(--text-dark);letter-spacing:-.02em;animation:fadeUp 1.4s .35s ease both;opacity:0}
.hero-names .ampersand{display:block;font-style:italic;font-size:.6em;color:var(--rose);line-height:1.15}
.hero-date{font-family:'Cormorant Garamond',serif;font-size:clamp(1rem,3vw,1.6rem);font-weight:300;letter-spacing:.14em;color:var(--text-mid);margin-top:2rem;animation:fadeUp 1.2s .6s ease both;opacity:0}
.hero-location{font-size:.75rem;letter-spacing:.2em;text-transform:uppercase;color:var(--text-light);margin-top:.6rem;animation:fadeUp 1.2s .75s ease both;opacity:0}
.hero-line{width:1px;height:0;background:linear-gradient(to bottom,var(--rose),transparent);margin:2rem auto 0;animation:growLine 1s 1s ease both}
@keyframes growLine{to{height:60px}}
.scroll-hint{position:absolute;bottom:32px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:8px;animation:fadeIn 2s 2s ease both;opacity:0}
.scroll-hint span{font-size:.65rem;letter-spacing:.22em;text-transform:uppercase;color:var(--text-light)}
.scroll-arrow{width:18px;height:18px;border-right:1px solid var(--rose);border-bottom:1px solid var(--rose);transform:rotate(45deg);animation:bounceArrow 1.8s 2.5s ease infinite;opacity:.6}
@keyframes bounceArrow{0%,100%{transform:rotate(45deg) translateY(0)}50%{transform:rotate(45deg) translateY(5px)}}

/* ‚îÄ‚îÄ COUNTDOWN ‚îÄ‚îÄ */
#countdown{background:var(--dark);color:var(--cream);padding:100px 24px}
#countdown h2.section-title{color:var(--cream)}
#countdown .subtitle{color:rgba(253,248,242,.35)}
.countdown-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:3px;margin-top:3rem}
@media(max-width:480px){.countdown-grid{grid-template-columns:repeat(2,1fr)}}
.count-box{background:rgba(253,248,242,.04);border:1px solid rgba(253,248,242,.07);padding:2rem .5rem 1.6rem;position:relative;overflow:hidden;transition:background .3s}
.count-box:hover{background:rgba(253,248,242,.07)}
.count-box::after{content:'';position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(to right,var(--rose),var(--blush));transform:scaleX(0);transition:transform .4s ease}
.count-box:hover::after{transform:scaleX(1)}
.count-number{font-family:'Cormorant Garamond',serif;font-size:clamp(2.6rem,7vw,5rem);font-weight:300;color:var(--dusty-rose);line-height:1;display:block}
.count-label{display:block;font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;color:rgba(253,248,242,.35);margin-top:.5rem}

/* ‚îÄ‚îÄ MENSAJE ‚îÄ‚îÄ */
#mensaje{background:var(--cream)}
.mensaje-text{font-family:'Cormorant Garamond',serif;font-size:clamp(1.3rem,4vw,2.1rem);font-weight:300;font-style:italic;line-height:1.55;color:var(--text-mid);max-width:560px;margin:0 auto}

/* ‚îÄ‚îÄ CEREMONIA ‚îÄ‚îÄ */
#ceremonia{background:linear-gradient(170deg,#f7ede3 0%,var(--cream) 100%)}
.events-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-top:3.5rem;text-align:left}
@media(max-width:580px){.events-grid{grid-template-columns:1fr}}
.event-card{background:rgba(253,248,242,.9);border:1px solid rgba(196,137,106,.18);border-radius:2px;padding:2rem 1.6rem;position:relative;overflow:hidden;transition:transform .4s cubic-bezier(.16,1,.3,1),box-shadow .4s ease}
.event-card::before{content:'';position:absolute;top:0;left:0;width:2px;height:100%;background:linear-gradient(to bottom,var(--rose),var(--blush))}
.event-card:hover{transform:translateY(-5px);box-shadow:0 16px 40px rgba(196,137,106,.14)}
.event-time{font-family:'Cormorant Garamond',serif;font-size:2.3rem;font-weight:300;color:var(--rose);line-height:1;margin-bottom:.3rem}
.event-type{font-size:.65rem;letter-spacing:.2em;text-transform:uppercase;color:var(--text-light);margin-bottom:.9rem}
.event-name{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:500;color:var(--text-dark);margin-bottom:.3rem}
.event-address{font-size:.86rem;color:var(--text-mid);line-height:1.6}
.event-link{display:inline-flex;align-items:center;gap:6px;margin-top:1.1rem;font-size:.7rem;letter-spacing:.14em;text-transform:uppercase;color:var(--rose);text-decoration:none;transition:gap .2s;}
.event-link:hover{gap:10px}
.event-link svg{width:12px;height:12px;flex-shrink:0}

/* ‚îÄ‚îÄ PROGRAMA ‚îÄ‚îÄ */
#programa{background:var(--cream)}
.timeline{position:relative;max-width:500px;margin:3.5rem auto 0;text-align:left}
.timeline::before{content:'';position:absolute;left:50px;top:8px;bottom:8px;width:1px;background:linear-gradient(to bottom,transparent 0%,var(--blush) 8%,var(--blush) 92%,transparent 100%)}
.timeline-item{display:flex;gap:1.4rem;align-items:flex-start;margin-bottom:2.6rem;opacity:0;transform:translateX(-30px);transition:opacity .7s cubic-bezier(.16,1,.3,1),transform .7s cubic-bezier(.16,1,.3,1)}
.timeline-item.visible{opacity:1;transform:none}
.t-time{min-width:50px;font-family:'Cormorant Garamond',serif;font-size:1rem;color:var(--rose);padding-top:2px;text-align:right;flex-shrink:0}
.t-dot{width:10px;height:10px;border-radius:50%;background:var(--cream);border:2px solid var(--rose);margin-top:5px;position:relative;z-index:1;flex-shrink:0;transition:background .3s,transform .3s}
.timeline-item:hover .t-dot{background:var(--rose);transform:scale(1.4)}
.t-title{font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-weight:500;color:var(--text-dark)}
.t-desc{font-size:.83rem;color:var(--text-mid);line-height:1.6;margin-top:3px}

/* ‚îÄ‚îÄ DRESS CODE ‚îÄ‚îÄ */
#dresscode{background:var(--dark)}
#dresscode h2.section-title{color:var(--cream)}
#dresscode .subtitle{color:rgba(253,248,242,.3)}
.dc-badge{display:inline-block;border:1px solid rgba(253,248,242,.15);border-radius:100px;padding:.4rem 1.4rem;font-size:.7rem;letter-spacing:.2em;text-transform:uppercase;color:var(--dusty-rose);margin:1.5rem 0 2rem}
.dc-rules{max-width:500px;margin:0 auto;text-align:left}
.dc-rule{display:flex;align-items:flex-start;gap:1.1rem;background:rgba(253,248,242,.04);border:1px solid rgba(253,248,242,.06);border-radius:4px;padding:1.2rem 1.4rem;margin-bottom:.75rem;transition:background .3s}
.dc-rule:hover{background:rgba(253,248,242,.07)}
.dc-icon{font-size:1.3rem;flex-shrink:0;margin-top:2px}
.dc-rule-text{font-size:.87rem;color:rgba(253,248,242,.55);line-height:1.65}
.dc-rule-text strong{display:block;color:var(--cream);font-weight:400;margin-bottom:3px}

/* ‚îÄ‚îÄ RSVP ‚îÄ‚îÄ */
#rsvp{background:linear-gradient(170deg,#f7ede3 0%,var(--cream) 100%)}
.rsvp-form{max-width:600px;margin:3rem auto 0;text-align:left}
.form-group{margin-bottom:1.8rem}
.form-group label{display:block;font-size:.7rem;letter-spacing:.16em;text-transform:uppercase;color:var(--text-light);margin-bottom:.5rem}
.form-group input,.form-group select,.form-group textarea{width:100%;background:rgba(253,248,242,.8);border:1px solid rgba(196,137,106,.2);border-bottom:2px solid rgba(196,137,106,.25);border-radius:0;padding:.8rem 1rem;font-family:'Jost',sans-serif;font-size:.95rem;font-weight:300;color:var(--text-dark);outline:none;transition:border-color .2s,background .2s;-webkit-appearance:none;}
.form-group select{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23c4896a' stroke-width='1.5'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:2.5rem;}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-bottom-color:var(--rose);background:#fff}
.form-group textarea{resize:vertical;min-height:80px}
.radio-group{display:flex;gap:.6rem;flex-wrap:wrap}
.radio-option{flex:1;min-width:90px}
.radio-option input{display:none}
.radio-option label{display:block;text-align:center;padding:.65rem .8rem;border:1px solid rgba(196,137,106,.2);cursor:pointer;font-size:.86rem;font-weight:400;color:var(--text-mid);transition:all .2s;background:rgba(253,248,242,.5);border-radius:2px;}
.radio-option input:checked+label{background:var(--rose);border-color:var(--rose);color:white}
.radio-option label:hover{border-color:var(--rose);color:var(--rose)}
.form-section-title{font-family:'Cormorant Garamond',serif;font-size:1.25rem;font-weight:400;color:var(--text-dark);margin:2.5rem 0 1.4rem;padding-bottom:.6rem;border-bottom:1px solid rgba(196,137,106,.15);display:flex;align-items:center;gap:10px;}
.form-section-title::after{content:'';flex:1;height:1px;background:linear-gradient(to right,rgba(196,137,106,.2),transparent)}
#ninos-row{display:none}
#alergias-row{display:none}
.btn-submit{display:block;width:100%;padding:1.1rem;background:var(--text-dark);color:var(--cream);border:none;font-family:'Jost',sans-serif;font-size:.78rem;letter-spacing:.25em;text-transform:uppercase;cursor:pointer;margin-top:3rem;position:relative;overflow:hidden;border-radius:2px;}
.btn-submit::before{content:'';position:absolute;inset:0;background:var(--rose);transform:translateX(-101%);transition:transform .4s cubic-bezier(.16,1,.3,1)}
.btn-submit:hover::before{transform:translateX(0)}
.btn-submit span{position:relative;z-index:1}
.rsvp-success{display:none;text-align:center;padding:4rem 2rem;border:1px solid rgba(138,158,132,.25);margin-top:3rem;background:rgba(138,158,132,.05)}
.rsvp-success.show{display:block;animation:fadeUp .8s ease both}
.rsvp-success .check{font-size:3.5rem;margin-bottom:1.5rem}
.rsvp-success h3{font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:300;color:var(--dark-sage);margin-bottom:.6rem}
.rsvp-success p{color:var(--text-mid)}

/* ‚îÄ‚îÄ CANVAS ‚îÄ‚îÄ */
#confetti-canvas,#hearts-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;display:none;}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
footer{background:var(--dark);text-align:center;padding:4rem 24px}
.footer-names{font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:300;color:var(--dusty-rose);margin-bottom:.6rem;letter-spacing:.05em}
footer p{font-size:.78rem;letter-spacing:.15em;color:rgba(253,248,242,.3)}

/* ‚îÄ‚îÄ ANIMACIONES ‚îÄ‚îÄ */
@keyframes fadeUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
@media(max-width:480px){
  section{padding:70px 20px}
  .timeline::before{left:42px}
  .t-time{min-width:42px;font-size:.88rem}
  .events-grid{gap:1rem}
  .event-card{padding:1.6rem 1.2rem}
}

/* ‚ïê‚ïê‚ïê ENVELOPE COVER ‚ïê‚ïê‚ïê */
#envelope-cover {
  position: fixed;
  inset: 0;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(ellipse 120% 120% at 50% 50%, #2a1a10 0%, #1a0e08 60%, #0d0603 100%);
  overflow: hidden;
}

/* Part√≠culas de fondo */
#envelope-cover::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(circle 1px at 20% 30%, rgba(196,137,106,.35) 0%, transparent 100%),
    radial-gradient(circle 1px at 75% 20%, rgba(232,196,180,.25) 0%, transparent 100%),
    radial-gradient(circle 1px at 40% 80%, rgba(196,137,106,.2) 0%, transparent 100%),
    radial-gradient(circle 1px at 85% 65%, rgba(232,196,180,.3) 0%, transparent 100%),
    radial-gradient(circle 1px at 10% 60%, rgba(196,137,106,.2) 0%, transparent 100%);
  pointer-events: none;
}

/* Brillo central sutil */
#envelope-cover::after {
  content: '';
  position: absolute;
  width: 600px;
  height: 600px;
  background: radial-gradient(ellipse, rgba(196,137,106,.08) 0%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

/* Escena del sobre */
.envelope-scene {
  position: relative;
  width: min(480px, 90vw);
  filter: drop-shadow(0 40px 80px rgba(0,0,0,.7));
}

/* Fecha flotante arriba */
.env-date {
  text-align: center;
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(.75rem, 2vw, .9rem);
  letter-spacing: .35em;
  text-transform: uppercase;
  color: rgba(196,137,106,.6);
  margin-bottom: 1.8rem;
  animation: fadeIn 2s 1s ease both;
  opacity: 0;
}

/* Cuerpo del sobre */
.envelope-body {
  position: relative;
  width: 100%;
  padding-bottom: 68%;
  background: linear-gradient(160deg, #f5ede0 0%, #edddc8 40%, #e8d4b8 100%);
  border-radius: 2px;
  overflow: visible;
}

/* Textura papel */
.envelope-body::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");
  border-radius: 2px;
  opacity: .6;
}

/* L√≠neas decorativas del sobre */
.envelope-lines {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

/* Tri√°ngulos laterales del interior */
.env-tri-left, .env-tri-right {
  position: absolute;
  bottom: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}
.env-tri-left {
  left: 0;
  border-style: solid;
  border-width: 0 0 100% 0;
  border-color: transparent;
  /* dibujado con svg */
}

/* SVG interior del sobre */
.env-interior {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* Solapa superior - La protagonista de la animaci√≥n */
.envelope-flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  transform-origin: top center;
  transform-style: preserve-3d;
  pointer-events: none;
  z-index: 10;
}
.envelope-flap svg {
  width: 100%;
  display: block;
}

/* Estado abierto de la solapa */
.envelope-scene.opening .envelope-flap {
  animation: openFlap 1s .1s cubic-bezier(.4,0,.2,1) forwards;
}
@keyframes openFlap {
  0%   { transform: perspective(800px) rotateX(0deg); }
  100% { transform: perspective(800px) rotateX(-180deg); }
}

/* Carta saliendo del sobre */
.env-letter {
  position: absolute;
  bottom: 8%;
  left: 8%;
  width: 84%;
  height: 80%;
  background: linear-gradient(170deg, #fdf8f2, #f5ede0);
  border-radius: 1px;
  transform: translateY(60%);
  opacity: 0;
  z-index: 5;
  box-shadow: 0 -4px 20px rgba(0,0,0,.15);
  display: flex;
  align-items: center;
  justify-content: center;
}
.env-letter-inner {
  text-align: center;
  font-family: 'Cormorant Garamond', serif;
  color: #3a2e2b;
}
.env-letter-inner .l-names {
  font-size: clamp(1.4rem, 5vw, 2.2rem);
  font-weight: 300;
  letter-spacing: .05em;
  line-height: 1.1;
}
.env-letter-inner .l-ampersand {
  font-style: italic;
  color: #c4896a;
}
.env-letter-inner .l-date {
  font-size: clamp(.65rem, 2vw, .8rem);
  letter-spacing: .25em;
  text-transform: uppercase;
  color: #9b8480;
  margin-top: .5rem;
}
.envelope-scene.opening .env-letter {
  animation: letterRise 1.1s .7s cubic-bezier(.16,1,.3,1) forwards;
}
@keyframes letterRise {
  0%   { transform: translateY(60%); opacity: 0; }
  30%  { opacity: 1; }
  100% { transform: translateY(-18%); opacity: 1; }
}

/* SELLO DE CERA */
.wax-seal {
  position: absolute;
  bottom: -38px;
  left: 50%;
  transform: translateX(-50%);
  width: 90px;
  height: 90px;
  cursor: pointer;
  z-index: 20;
  transition: transform .3s cubic-bezier(.16,1,.3,1), filter .3s;
  -webkit-tap-highlight-color: transparent;
}
.wax-seal:hover {
  transform: translateX(-50%) scale(1.08);
  filter: drop-shadow(0 8px 24px rgba(180,40,40,.5));
}
.wax-seal:active {
  transform: translateX(-50%) scale(.96);
}

/* Pulso del sello */
.wax-seal::after {
  content: '';
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  background: rgba(180,40,40,.2);
  animation: sealPulse 2.5s 2s ease infinite;
}
@keyframes sealPulse {
  0%, 100% { transform: scale(1); opacity: .7; }
  50% { transform: scale(1.15); opacity: 0; }
}

/* Hint de "haz clic" */
.seal-hint {
  position: absolute;
  bottom: -72px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  font-family: 'Jost', sans-serif;
  font-size: .62rem;
  letter-spacing: .22em;
  text-transform: uppercase;
  color: rgba(196,137,106,.5);
  animation: hintBlink 3s 2.5s ease infinite;
  pointer-events: none;
}
@keyframes hintBlink {
  0%, 100% { opacity: .5; }
  50% { opacity: 1; }
}

/* Animaci√≥n de entrada del sobre */
.envelope-scene {
  animation: envEntrance 1.4s .3s cubic-bezier(.16,1,.3,1) both;
  opacity: 0;
}
@keyframes envEntrance {
  0%   { opacity: 0; transform: translateY(40px) scale(.95); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Salida de la pantalla de portada */
#envelope-cover.closing {
  animation: coverExit 1s .9s cubic-bezier(.4,0,1,1) forwards;
}
@keyframes coverExit {
  0%   { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.05); pointer-events: none; }
}



/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PORTADA SOBRE ‚Äî PANTALLA COMPLETA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#envelope-cover {
  position: fixed;
  inset: 0;
  z-index: 99999;
  overflow: hidden;
  background: #1c1008;
  perspective: 1200px;
}

/* El sobre ocupa toda la pantalla */
.env-wrap {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
}

/* ‚îÄ‚îÄ Cuerpo del sobre (mitad inferior) ‚îÄ‚îÄ */
.env-body {
  position: absolute;
  inset: 0;
  background: linear-gradient(175deg, #f0e2cc 0%, #e8d5b5 50%, #dfc99f 100%);
}

/* Textura papel */
.env-body::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='.035'/%3E%3C/svg%3E");
  pointer-events: none;
}

/* SVG de pliegues interiores */
.env-folds {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* ‚îÄ‚îÄ Solapa superior ‚îÄ‚îÄ */
.env-flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  /* Altura = la mitad + un poco para que el tri√°ngulo llegue al centro */
  height: 60%;
  transform-origin: top center;
  transform-style: preserve-3d;
  z-index: 10;
  cursor: pointer;
}

.env-flap svg {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
}

/* Cara trasera de la solapa (cuando se abre) */
.env-flap-back {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  transform: rotateX(180deg);
}

/* ‚îÄ‚îÄ SELLO DE CERA ‚îÄ‚îÄ */
.wax-seal {
  position: absolute;
  /* Centrado horizontal, en el punto de punta de la solapa = ~60% del alto */
  left: 50%;
  top: 60%;
  transform: translate(-50%, -50%);
  width: clamp(90px, 14vw, 130px);
  height: clamp(90px, 14vw, 130px);
  cursor: pointer;
  z-index: 20;
  transition: transform .35s cubic-bezier(.16,1,.3,1), filter .35s;
  -webkit-tap-highlight-color: transparent;
  pointer-events: auto;
}
.wax-seal:hover {
  transform: translate(-50%, -50%) scale(1.07);
  filter: drop-shadow(0 6px 28px rgba(160,20,20,.6));
}
.wax-seal:active {
  transform: translate(-50%, -50%) scale(.95);
}

/* Pulso de llamada a la acci√≥n */
.seal-pulse {
  position: absolute;
  inset: -10%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(180,30,30,.18) 0%, transparent 70%);
  animation: sealPulse 2.8s 1.5s ease-in-out infinite;
  pointer-events: none;
}
@keyframes sealPulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  60% { transform: scale(1.35); opacity: 0; }
}

.seal-hint {
  position: absolute;
  top: 60%;
  left: 50%;
  transform: translate(-50%, calc(-50% + clamp(55px, 8vw, 75px)));
  white-space: nowrap;
  font-family: 'Jost', sans-serif;
  font-size: clamp(.55rem, 1.2vw, .7rem);
  letter-spacing: .28em;
  text-transform: uppercase;
  color: rgba(155, 120, 80, .65);
  z-index: 21;
  pointer-events: none;
  animation: hintFade 3s 2s ease infinite;
}
@keyframes hintFade {
  0%, 100% { opacity: .65; }
  50% { opacity: 1; }
}

/* ‚îÄ‚îÄ ANIMACI√ìN APERTURA ‚îÄ‚îÄ */

/* 1. El sello se rompe */
.opening .wax-seal {
  animation: sealBreak .45s ease forwards !important;
  pointer-events: none;
}
@keyframes sealBreak {
  0%   { transform: translate(-50%,-50%) scale(1); opacity: 1; }
  40%  { transform: translate(-50%,-50%) scale(1.15) rotate(-4deg); }
  100% { transform: translate(-50%,-50%) scale(.6) rotate(8deg); opacity: 0; }
}

/* 2. La solapa se abre hacia arriba */
.opening .env-flap {
  animation: flapOpen 1.1s .35s cubic-bezier(.4,0,.15,1) forwards;
}
@keyframes flapOpen {
  0%   { transform: perspective(1200px) rotateX(0deg); }
  100% { transform: perspective(1200px) rotateX(-175deg); }
}

/* 3. El hint desaparece */
.opening .seal-hint { display: none; }

/* 4. Toda la portada se desvanece */
#envelope-cover.fade-out {
  animation: coverFade .9s ease forwards;
  pointer-events: none;
}
@keyframes coverFade {
  0%   { opacity: 1; }
  100% { opacity: 0; }
}

/* Entrada del sobre */
#envelope-cover {
  animation: coverIn .8s .1s ease both;
}
@keyframes coverIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê PORTADA SOBRE ‚ïê‚ïê‚ïê -->
<div id="envelope-cover">
  <div class="env-wrap" id="env-scene">

    <!-- Cuerpo del sobre (fondo est√°tico) -->
    <div class="env-body">
      <svg class="env-folds" viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Tri√°ngulo inferior -->
        <polygon points="0,100 100,100 50,52" fill="#c9b490" opacity=".45"/>
        <!-- Tri√°ngulo izquierdo -->
        <polygon points="0,0 0,100 50,52" fill="#c2aa82" opacity=".35"/>
        <!-- Tri√°ngulo derecho -->
        <polygon points="100,0 100,100 50,52" fill="#bba47a" opacity=".3"/>
        <!-- L√≠neas de pliegue -->
        <line x1="0" y1="0"   x2="50" y2="52" stroke="#a89060" stroke-width=".3" opacity=".5" vector-effect="non-scaling-stroke"/>
        <line x1="100" y1="0"  x2="50" y2="52" stroke="#a89060" stroke-width=".3" opacity=".5" vector-effect="non-scaling-stroke"/>
        <line x1="0" y1="100" x2="50" y2="52" stroke="#a89060" stroke-width=".4" opacity=".5" vector-effect="non-scaling-stroke"/>
        <line x1="100" y1="100" x2="50" y2="52" stroke="#a89060" stroke-width=".4" opacity=".5" vector-effect="non-scaling-stroke"/>
        <!-- Borde del sobre -->
        <rect x=".3" y=".3" width="99.4" height="99.4" stroke="#b89a6a" stroke-width=".4" fill="none" opacity=".5" vector-effect="non-scaling-stroke"/>
        <!-- L√≠nea decorativa interior fina -->
        <rect x="1.5" y="1.5" width="97" height="97" stroke="#b89a6a" stroke-width=".2" fill="none" opacity=".25" vector-effect="non-scaling-stroke"/>
      </svg>
    </div>

    <!-- Solapa superior -->
    <div class="env-flap" id="env-flap">
      <svg viewBox="0 0 100 65" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="fg" x1="50" y1="0" x2="50" y2="65" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#f2e2c8"/>
            <stop offset="100%" stop-color="#dac89e"/>
          </linearGradient>
          <!-- Gradiente cara interior (visible al abrirse) -->
          <linearGradient id="fgi" x1="50" y1="0" x2="50" y2="65" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#e8dcc8"/>
            <stop offset="100%" stop-color="#d4c4a0"/>
          </linearGradient>
        </defs>
        <!-- Cara exterior de la solapa -->
        <polygon points="0,0 100,0 50,98" fill="url(#fg)"/>
        <!-- Borde superior -->
        <line x1="0" y1="0" x2="100" y2="0" stroke="#c4a870" stroke-width=".5" opacity=".6" vector-effect="non-scaling-stroke"/>
        <!-- Pliegues -->
        <line x1="0" y1="0" x2="50" y2="98" stroke="#b89860" stroke-width=".3" opacity=".35" vector-effect="non-scaling-stroke"/>
        <line x1="100" y1="0" x2="50" y2="98" stroke="#b89860" stroke-width=".3" opacity=".35" vector-effect="non-scaling-stroke"/>
        <!-- Sombra sutil en la base de la solapa -->
        <polygon points="0,0 100,0 50,98" fill="url(#flapShadow)" opacity=".12"/>
        <defs>
          <linearGradient id="flapShadow" x1="50" y1="0" x2="50" y2="98" gradientUnits="userSpaceOnUse">
            <stop offset="70%" stop-color="transparent"/>
            <stop offset="100%" stop-color="#3a2000"/>
          </linearGradient>
        </defs>
      </svg>
    </div>

    <!-- SELLO DE CERA -->
    <div class="wax-seal" id="wax-seal" onclick="openEnvelope()" role="button" aria-label="Abrir invitaci√≥n">
      <div class="seal-pulse"></div>
      <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Gradiente principal de la cera: profundidad roja -->
          <radialGradient id="wg" cx="38%" cy="32%" r="62%">
            <stop offset="0%"   stop-color="#dd3a2a"/>
            <stop offset="30%"  stop-color="#c42020"/>
            <stop offset="65%"  stop-color="#a01515"/>
            <stop offset="100%" stop-color="#6e0808"/>
          </radialGradient>
          <!-- Brillo especular -->
          <radialGradient id="ws" cx="32%" cy="26%" r="38%">
            <stop offset="0%"   stop-color="rgba(255,210,190,.3)"/>
            <stop offset="100%" stop-color="rgba(255,150,120,0)"/>
          </radialGradient>
          <!-- Sombra exterior -->
          <filter id="wf" x="-18%" y="-18%" width="136%" height="136%">
            <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#3a0000" flood-opacity=".55"/>
            <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#000" flood-opacity=".3"/>
          </filter>
          <!-- Grabado del texto -->
          <filter id="engrave">
            <feDropShadow dx="0" dy="-1" stdDeviation="0.5" flood-color="#fff" flood-opacity=".2"/>
            <feDropShadow dx="0" dy="1"  stdDeviation="1"   flood-color="#000" flood-opacity=".6"/>
          </filter>
        </defs>

        <!-- Forma irregular del sello (cera derramada) -->
        <path d="
          M60 8
          C66 7, 72 10, 77 8
          C82 6, 86 10, 91 11
          C96 12, 100 17, 103 22
          C106 27, 107 33, 108 39
          C109 45, 111 51, 110 57
          C109 63, 107 68, 105 73
          C103 78, 99 83, 95 87
          C91 91, 86 94, 81 96
          C76 98, 71 100, 65 101
          C60 102, 55 104, 50 103
          C45 102, 40 100, 35 98
          C30 96, 25 93, 21 89
          C17 85, 13 80, 11 75
          C9 70, 9 64, 8 58
          C7 52, 6 46, 7 40
          C8 34, 10 28, 13 23
          C16 18, 20 13, 26 11
          C32 9, 37 6, 43 8
          C49 10, 54 9, 60 8Z
        " fill="url(#wg)" filter="url(#wf)"/>

        <!-- Capa de brillo -->
        <path d="
          M60 8
          C66 7, 72 10, 77 8
          C82 6, 86 10, 91 11
          C96 12, 100 17, 103 22
          C106 27, 107 33, 108 39
          C109 45, 111 51, 110 57
          C109 63, 107 68, 105 73
          C103 78, 99 83, 95 87
          C91 91, 86 94, 81 96
          C76 98, 71 100, 65 101
          C60 102, 55 104, 50 103
          C45 102, 40 100, 35 98
          C30 96, 25 93, 21 89
          C17 85, 13 80, 11 75
          C9 70, 9 64, 8 58
          C7 52, 6 46, 7 40
          C8 34, 10 28, 13 23
          C16 18, 20 13, 26 11
          C32 9, 37 6, 43 8
          C49 10, 54 9, 60 8Z
        " fill="url(#ws)"/>

        <!-- C√≠rculo grabado exterior -->
        <circle cx="59" cy="55" r="34" stroke="rgba(255,255,255,.14)" stroke-width="1.2" fill="none"/>
        <!-- C√≠rculo grabado interior -->
        <circle cx="59" cy="55" r="28" stroke="rgba(255,255,255,.09)" stroke-width=".7" fill="none"/>

        <!-- Peque√±os puntos decorativos alrededor -->
        <circle cx="59" cy="22" r="1.2" fill="rgba(255,255,255,.18)"/>
        <circle cx="59" cy="88" r="1.2" fill="rgba(255,255,255,.18)"/>
        <circle cx="25"  cy="55" r="1.2" fill="rgba(255,255,255,.18)"/>
        <circle cx="93"  cy="55" r="1.2" fill="rgba(255,255,255,.18)"/>

        <!-- Texto O & S grabado -->
        <text x="59" y="46"
          text-anchor="middle"
          font-family="Cormorant Garamond, serif"
          font-size="17"
          font-weight="500"
          fill="rgba(255,240,230,.88)"
          filter="url(#engrave)"
          letter-spacing="2">O</text>
        <text x="59" y="60"
          text-anchor="middle"
          font-family="Cormorant Garamond, serif"
          font-size="12"
          font-style="italic"
          fill="rgba(255,210,190,.7)"
          filter="url(#engrave)">&amp;</text>
        <text x="59" y="74"
          text-anchor="middle"
          font-family="Cormorant Garamond, serif"
          font-size="17"
          font-weight="500"
          fill="rgba(255,240,230,.88)"
          filter="url(#engrave)"
          letter-spacing="2">S</text>
      </svg>
    </div><!-- /wax-seal -->

    <div class="seal-hint">Rompe el sello para abrir</div>

  </div><!-- /env-scene -->
</div><!-- /envelope-cover -->




<canvas id="confetti-canvas"></canvas>
<canvas id="hearts-canvas"></canvas>

<!-- ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê -->
<section id="hero">
  <div class="hero-content">
    <p class="hero-pre">Os invitamos a nuestra boda</p>
    <h1 class="hero-names">Oscar<span class="ampersand">&amp;</span>Sara</h1>
    <p class="hero-date">17 ¬∑ Julio ¬∑ 2027</p>
    <p class="hero-location">Antequera ¬∑ M√°laga</p>
    <div class="hero-line"></div>
  </div>
  <div class="scroll-hint"><span>Desliza</span><div class="scroll-arrow"></div></div>
</section>

<!-- ‚ïê‚ïê‚ïê CUENTA ATR√ÅS ‚ïê‚ïê‚ïê -->
<section id="countdown">
  <div class="section-inner">
    <p class="subtitle reveal-up">Faltan</p>
    <h2 class="section-title reveal-up delay-1">La cuenta atr√°s ha comenzado</h2>
    <div class="countdown-grid reveal-up delay-2">
      <div class="count-box"><span class="count-number" id="cd-days">‚Äî</span><span class="count-label">D√≠as</span></div>
      <div class="count-box"><span class="count-number" id="cd-hours">‚Äî</span><span class="count-label">Horas</span></div>
      <div class="count-box"><span class="count-number" id="cd-mins">‚Äî</span><span class="count-label">Minutos</span></div>
      <div class="count-box"><span class="count-number" id="cd-secs">‚Äî</span><span class="count-label">Segundos</span></div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê MENSAJE ‚ïê‚ïê‚ïê -->
<section id="mensaje">
  <div class="section-inner">
    <div class="floral-divider reveal-scale">
      <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="4" fill="#c4896a"/><ellipse cx="12" cy="4" rx="2.5" ry="3.5" fill="#e8c4b4"/><ellipse cx="12" cy="20" rx="2.5" ry="3.5" fill="#e8c4b4"/><ellipse cx="4" cy="12" rx="3.5" ry="2.5" fill="#e8c4b4"/><ellipse cx="20" cy="12" rx="3.5" ry="2.5" fill="#e8c4b4"/></svg>
    </div>
    <p class="mensaje-text reveal-scale delay-1">¬´Te quiero. Como las peras a los peros. Como el lim√≥n al limonero¬ª</p>
    <div class="floral-divider reveal-scale delay-2" style="transform:scaleY(-1);margin-top:2rem;">
      <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="4" fill="#c4896a"/><ellipse cx="12" cy="4" rx="2.5" ry="3.5" fill="#e8c4b4"/><ellipse cx="12" cy="20" rx="2.5" ry="3.5" fill="#e8c4b4"/><ellipse cx="4" cy="12" rx="3.5" ry="2.5" fill="#e8c4b4"/><ellipse cx="20" cy="12" rx="3.5" ry="2.5" fill="#e8c4b4"/></svg>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê CEREMONIA ‚ïê‚ïê‚ïê -->
<section id="ceremonia">
  <div class="section-inner">
    <p class="subtitle reveal-up">D√≥nde y cu√°ndo</p>
    <h2 class="section-title reveal-up delay-1">El gran d√≠a</h2>
    <div class="events-grid">
      <div class="event-card reveal-left delay-2">
        <div class="event-time">18:30</div>
        <div class="event-type">Ceremonia religiosa</div>
        <div class="event-name">Iglesia de los Remedios</div>
        <div class="event-address">Antequera, M√°laga</div>
        <a href="https://maps.google.com/?q=Iglesia+Nuestra+Se√±ora+de+los+Remedios+Antequera+Malaga" target="_blank" rel="noopener" class="event-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          Ver en el mapa
        </a>
      </div>
      <div class="event-card reveal-right delay-3">
        <div class="event-time">20:00</div>
        <div class="event-type">Banquete &amp; Celebraci√≥n</div>
        <div class="event-name">Hacienda La Capilla</div>
        <div class="event-address">Mollina, M√°laga</div>
        <a href="https://maps.google.com/?q=Hacienda+La+Capilla+Mollina+Malaga" target="_blank" rel="noopener" class="event-link">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          Ver en el mapa
        </a>
      </div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê PROGRAMA ‚ïê‚ïê‚ïê -->
<section id="programa">
  <div class="section-inner">
    <p class="subtitle reveal-up">El d√≠a</p>
    <h2 class="section-title reveal-up delay-1">Programa</h2>
    <div class="timeline">
      <div class="timeline-item"><span class="t-time">18:15</span><div class="t-dot"></div><div class="t-info"><div class="t-title">Llegada de los invitados</div><div class="t-desc">Iglesia de los Remedios, Antequera</div></div></div>
      <div class="timeline-item"><span class="t-time">18:30</span><div class="t-dot"></div><div class="t-info"><div class="t-title">Ceremonia religiosa</div><div class="t-desc">Celebraci√≥n del sacramento del matrimonio</div></div></div>
      <div class="timeline-item"><span class="t-time">19:30</span><div class="t-dot"></div><div class="t-info"><div class="t-title">Traslado a Hacienda La Capilla</div><div class="t-desc">Mollina (aprox. 15 min desde Antequera)</div></div></div>
      <div class="timeline-item"><span class="t-time">20:00</span><div class="t-dot"></div><div class="t-info"><div class="t-title">C√≥ctel de bienvenida</div><div class="t-desc">Jardines de la Hacienda</div></div></div>
      <div class="timeline-item"><span class="t-time">21:30</span><div class="t-dot"></div><div class="t-info"><div class="t-title">Banquete nupcial</div><div class="t-desc">Cena en la terraza principal</div></div></div>
      <div class="timeline-item"><span class="t-time">00:00</span><div class="t-dot"></div><div class="t-info"><div class="t-title">Baile &amp; Fiesta</div><div class="t-desc">¬°A bailar hasta que el cuerpo aguante!</div></div></div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê DRESS CODE ‚ïê‚ïê‚ïê -->
<section id="dresscode">
  <div class="section-inner">
    <p class="subtitle reveal-up">Vestimenta</p>
    <h2 class="section-title reveal-up delay-1">Dress Code</h2>
    <div class="dc-badge reveal-scale delay-2">Formal de noche ¬∑ Elegante</div>
    <div class="dc-rules">
      <div class="dc-rule reveal-left delay-2">
        <span class="dc-icon">‚ú®</span>
        <div class="dc-rule-text"><strong>Etiqueta de noche</strong>Traje oscuro para ellos. Vestido de c√≥ctel o largo para ellas.</div>
      </div>
      <div class="dc-rule reveal-left delay-3">
        <span class="dc-icon">üö´</span>
        <div class="dc-rule-text"><strong>Prohibido el blanco y tonos similares</strong>Blanco, marfil, champ√°n, crema y dorado muy claro est√°n reservados para la novia. Gracias por entenderlo.</div>
      </div>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê RSVP ‚ïê‚ïê‚ïê -->
<section id="rsvp">
  <div class="section-inner">
    <p class="subtitle reveal-up">Confirmaci√≥n</p>
    <h2 class="section-title reveal-up delay-1">¬øContamos contigo?</h2>
    <p class="body-text reveal-up delay-2">Por favor, confirma tu asistencia antes del <strong>17 de enero de 2027</strong>. Necesitamos toda la informaci√≥n para organizarlo todo con cari√±o.</p>

    <iframe name="hidden-gf" style="display:none" aria-hidden="true"></iframe>
    <form class="rsvp-form" id="rsvp-form"
      data-action="https://docs.google.com/forms/d/e/1FAIpQLSfxZw5qcPexXDJhIBCANJr5sFP1sW906LIVl4F6Z3TKpDr1cg/formResponse"
      onsubmit="handleRsvpSubmit(event)">

      <p class="form-section-title">Datos personales</p>
      <div class="form-group reveal-up delay-1">
        <label>Nombre y apellido</label>
        <input type="text" name="entry.2062650618" placeholder="Tu nombre completo" required>
      </div>
      <div class="form-group attendance-group reveal-up delay-2">
        <label>¬øAsistir√°s a la boda?</label>
        <div class="radio-group">
          <div class="radio-option">
            <!-- ‚úÖ Valor exacto del Google Form -->
            <input type="radio" name="entry.957980292" id="a-si" value="S√≠, asistir√© üéâ" required onchange="onAsistenciaChange(this)">
            <label for="a-si">S√≠, asistir√© üéâ</label>
          </div>
          <div class="radio-option">
            <!-- ‚úÖ Valor exacto del Google Form -->
            <input type="radio" name="entry.957980292" id="a-no" value="No podr√© asistir üò¢" onchange="onAsistenciaChange(this)">
            <label for="a-no">No podr√© asistir üò¢</label>
          </div>
        </div>
      </div>
      <div class="form-group reveal-up delay-3">
        <label>¬øTraes a un acompa√±ante?</label>
        <div class="radio-group">
          <div class="radio-option">
            <!-- ‚úÖ CORREGIDO: era "S√≠", el form espera "Si" (sin tilde) -->
            <input type="radio" name="entry.133463304" id="ac-si" value="Si">
            <label for="ac-si">S√≠ üíë</label>
          </div>
          <div class="radio-option">
            <input type="radio" name="entry.133463304" id="ac-no" value="No">
            <label for="ac-no">No</label>
          </div>
        </div>
      </div>

      <p class="form-section-title reveal-up">Log√≠stica</p>
      <div class="form-group reveal-up delay-1">
        <label>¬øNecesitas servicio de transporte?</label>
        <div class="radio-group">
          <!-- ‚úÖ CORREGIDO: era "S√≠", el form espera "S√≠, necesito" -->
          <div class="radio-option"><input type="radio" name="entry.912439665" id="t-si" value="S√≠, necesito"><label for="t-si">S√≠, necesito</label></div>
          <div class="radio-option"><input type="radio" name="entry.912439665" id="t-no" value="No, me apa√±o"><label for="t-no">No, me apa√±o</label></div>
        </div>
      </div>
      <div class="form-group reveal-up delay-2">
        <label>¬øNecesitas alojamiento / hotel?</label>
        <div class="radio-group">
          <!-- ‚úÖ CORREGIDO: era "S√≠", el form espera "S√≠, necesito" -->
          <div class="radio-option"><input type="radio" name="entry.153138595" id="h-si" value="S√≠, necesito"><label for="h-si">S√≠, necesito</label></div>
          <div class="radio-option"><input type="radio" name="entry.153138595" id="h-no" value="Ya tengo"><label for="h-no">Ya tengo</label></div>
        </div>
      </div>
      <div class="form-group reveal-up delay-3">
        <label>¬øVendr√°s acompa√±ado de ni√±os?</label>
        <div class="radio-group">
          <!-- ‚úÖ CORREGIDO: era "S√≠", el form espera "SI" (may√∫sculas) -->
          <div class="radio-option"><input type="radio" name="entry.1468727656" id="n-si" value="SI" onchange="toggleNinos(this)"><label for="n-si">S√≠</label></div>
          <div class="radio-option"><input type="radio" name="entry.1468727656" id="n-no" value="No" onchange="toggleNinos(this)"><label for="n-no">No</label></div>
        </div>
      </div>
      <div class="form-group" id="ninos-row">
        <label>¬øCu√°ntos ni√±os vendr√°n?</label>
        <select name="entry.1924814829">
          <option value="">Selecciona...</option>
          <option value="1 ni√±o/a">1 ni√±o/a</option>
          <option value="2 ni√±os/as">2 ni√±os/as</option>
          <option value="3 ni√±os/as">3 ni√±os/as</option>
          <option value="4 o m√°s">4 o m√°s üôÄ</option>
        </select>
      </div>

      <p class="form-section-title reveal-up">Men√∫</p>
      <div class="form-group reveal-up delay-1">
        <label>Plato principal</label>
        <div class="radio-group">
          <div class="radio-option"><input type="radio" name="entry.1907484985" id="m-carne" value="ü•© Carne"><label for="m-carne">ü•© Carne</label></div>
          <div class="radio-option"><input type="radio" name="entry.1907484985" id="m-pescado" value="üêü Pescado"><label for="m-pescado">üêü Pescado</label></div>
        </div>
      </div>
      <div class="form-group reveal-up delay-2">
        <label>¬øTienes alergias o intolerancias alimentarias?</label>
        <div class="radio-group">
          <div class="radio-option"><input type="radio" name="entry.319600980" id="al-si" value="S√≠" onchange="toggleAlergias(this)"><label for="al-si">S√≠</label></div>
          <div class="radio-option"><input type="radio" name="entry.319600980" id="al-no" value="No" onchange="toggleAlergias(this)"><label for="al-no">No</label></div>
        </div>
      </div>
      <div class="form-group" id="alergias-row">
        <label>¬øCu√°les?</label>
        <textarea name="entry.1886171490" placeholder="Ej: gluten, lactosa, frutos secos..."></textarea>
      </div>

      <button type="submit" class="btn-submit"><span>Confirmar asistencia</span></button>
    </form>

    <div class="rsvp-success" id="rsvp-success">
      <div class="check">üíù</div>
      <h3>¬°Gracias!</h3>
      <p>Hemos recibido tu confirmaci√≥n. Nos vemos el 17 de julio de 2027 ü•Ç</p>
    </div>
    <div class="rsvp-success" id="rsvp-declined">
      <div class="check">ü§ç</div>
      <h3>Lo entendemos</h3>
      <p>Lamentamos mucho no poder contar contigo. Un abrazo de nuestra parte.</p>
    </div>
  </div>
</section>

<!-- ‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê -->
<footer>
  <div class="footer-names">Los G√ºeris</div>
  <p>17 ¬∑ 07 ¬∑ 2027</p>
  <p style="margin-top:.5rem;font-size:.7rem;opacity:.3;">Con amor, desde M√°laga</p>
</footer>

<script>
/* ‚îÄ‚îÄ Countdown ‚îÄ‚îÄ */
function updateCountdown(){
  const diff=new Date('2027-07-17T18:30:00')-new Date();
  if(diff<=0)return;
  document.getElementById('cd-days').textContent=String(Math.floor(diff/86400000)).padStart(3,'0');
  document.getElementById('cd-hours').textContent=String(Math.floor((diff%86400000)/3600000)).padStart(2,'0');
  document.getElementById('cd-mins').textContent=String(Math.floor((diff%3600000)/60000)).padStart(2,'0');
  document.getElementById('cd-secs').textContent=String(Math.floor((diff%60000)/1000)).padStart(2,'0');
}
document.body.style.overflow='hidden';
updateCountdown();
setInterval(updateCountdown,1000);

/* ‚îÄ‚îÄ Reveal on scroll ‚îÄ‚îÄ */
const io=new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); }
  });
},{threshold:.12});
document.querySelectorAll('[class*="reveal-"],.timeline-item').forEach(el=>io.observe(el));

/* ‚îÄ‚îÄ Form helpers ‚îÄ‚îÄ */
function toggleNinos(el){ document.getElementById('ninos-row').style.display=el.value==='SI'?'block':'none'; }
function toggleAlergias(el){ document.getElementById('alergias-row').style.display=el.value==='S√≠'?'block':'none'; }

/* ‚îÄ‚îÄ Confetti ‚îÄ‚îÄ */
const confCanvas=document.getElementById('confetti-canvas');
const confCtx=confCanvas.getContext('2d');
let pieces=[],confAnimId=null;
const CONF_COLORS=['#c4896a','#e8c4b4','#d4a593','#8a9e84','#c9a96e','#fdf8f2','#9b7b76','#5c7056'];

function launchConfetti(){
  confCanvas.width=window.innerWidth; confCanvas.height=window.innerHeight;
  confCanvas.style.display='block'; pieces=[];
  for(let i=0;i<180;i++){
    pieces.push({x:Math.random()*confCanvas.width,y:-20-Math.random()*confCanvas.height*.3,w:8+Math.random()*8,h:4+Math.random()*5,color:CONF_COLORS[Math.floor(Math.random()*CONF_COLORS.length)],rot:Math.random()*Math.PI*2,rotV:(Math.random()-.5)*.2,vx:(Math.random()-.5)*4,vy:2+Math.random()*4,opacity:1,shape:Math.random()>.5?'rect':'circle'});
  }
  if(confAnimId)cancelAnimationFrame(confAnimId);
  animateConfetti();
  setTimeout(()=>{ cancelAnimationFrame(confAnimId); confCanvas.style.display='none'; pieces=[]; },4500);
}
function animateConfetti(){
  confCtx.clearRect(0,0,confCanvas.width,confCanvas.height);
  let alive=false;
  pieces.forEach(p=>{
    p.x+=p.vx; p.y+=p.vy; p.vy+=.07; p.rot+=p.rotV;
    if(p.y>confCanvas.height*.85) p.opacity=Math.max(0,p.opacity-.04);
    if(p.opacity>0) alive=true;
    confCtx.save(); confCtx.globalAlpha=p.opacity; confCtx.translate(p.x,p.y); confCtx.rotate(p.rot); confCtx.fillStyle=p.color;
    if(p.shape==='circle'){ confCtx.beginPath(); confCtx.arc(0,0,p.w/2,0,Math.PI*2); confCtx.fill(); }
    else { confCtx.fillRect(-p.w/2,-p.h/2,p.w,p.h); }
    confCtx.restore();
  });
  if(alive) confAnimId=requestAnimationFrame(animateConfetti);
  else { confCanvas.style.display='none'; pieces=[]; }
}

/* ‚îÄ‚îÄ Hearts ‚îÄ‚îÄ */
const hCanvas=document.getElementById('hearts-canvas');
const hCtx=hCanvas.getContext('2d');
let hearts=[],hAnimId=null,heartsFired=false;
const H_COLORS=['#e8192c','#ff4d6d','#ff69b4','#c9184a','#ffb3c1','#ff85a1'];

function drawHeart(c,x,y,size){
  const r=size*0.52;
  c.beginPath();
  c.arc(x-r*0.5, y, r, Math.PI, 0);
  c.arc(x+r*0.5, y, r, Math.PI, 0);
  c.bezierCurveTo(x+r*1.5, y+r*0.9, x, y+r*2.2, x, y+r*2.2);
  c.bezierCurveTo(x, y+r*2.2, x-r*1.5, y+r*0.9, x-r*1.5, y);
  c.closePath();
  c.fill();
}
function launchHearts(){
  hCanvas.width=window.innerWidth; hCanvas.height=window.innerHeight;
  hCanvas.style.display='block'; hearts=[];
  for(let i=0;i<55;i++){
    hearts.push({
      x:Math.random()*hCanvas.width,
      y:hCanvas.height+20,
      size:7+Math.random()*14,
      color:H_COLORS[Math.floor(Math.random()*H_COLORS.length)],
      vx:(Math.random()-.5)*2.5,
      vy:-(3.5+Math.random()*5),
      opacity:1,
      wobble:Math.random()*Math.PI*2,
      wobbleSpeed:.05+Math.random()*.03
    });
  }
  if(hAnimId) cancelAnimationFrame(hAnimId);
  animateHearts();
  setTimeout(()=>{ cancelAnimationFrame(hAnimId); hCanvas.style.display='none'; hearts=[]; },2000);
}
function animateHearts(){
  hCtx.clearRect(0,0,hCanvas.width,hCanvas.height);
  let alive=false;
  hearts.forEach(h=>{
    h.wobble+=h.wobbleSpeed; h.x+=h.vx+Math.sin(h.wobble)*.7; h.y+=h.vy; h.vy+=.06;
    if(h.y<hCanvas.height*.35) h.opacity=Math.max(0,h.opacity-.03);
    if(h.opacity>0) alive=true;
    hCtx.save(); hCtx.globalAlpha=h.opacity; hCtx.fillStyle=h.color;
    drawHeart(hCtx,h.x,h.y,h.size); hCtx.restore();
  });
  if(alive) hAnimId=requestAnimationFrame(animateHearts);
  else { hCanvas.style.display='none'; hearts=[]; }
}
document.addEventListener('change',function(e){
  if(e.target.id==='ac-si'&&!heartsFired){ heartsFired=true; launchHearts(); }
});

/* ‚îÄ‚îÄ Asistencia change ‚îÄ‚îÄ */
let confettiFired=false;
function onAsistenciaChange(el){
  const form=document.getElementById('rsvp-form');
  const btn=form.querySelector('.btn-submit span');

  if(el.value==='S√≠, asistir√© üéâ'){
    form.classList.remove('is-declined');
    btn.textContent='Confirmar asistencia';
    if(!confettiFired){ confettiFired=true; launchConfetti(); }
    return;
  }

  if(el.value==='No podr√© asistir üò¢'){
    form.classList.add('is-declined');
    btn.textContent='Enviar respuesta';
  }
}

/* ‚îÄ‚îÄ Env√≠o a Google Forms via fetch no-cors ‚îÄ‚îÄ */
async function sendToGoogleForms(form){
  const url = form.dataset.action;
  const body = new URLSearchParams(new FormData(form));
  try {
    await fetch(url, { method:'POST', mode:'no-cors', body });
  } catch(e) {}
}

/* ‚îÄ‚îÄ RSVP submit ‚îÄ‚îÄ */
async function handleRsvpSubmit(e){
  e.preventDefault();
  const form=document.getElementById('rsvp-form');
  const declined=document.querySelector('input[name="entry.957980292"]:checked')?.value==='No podr√© asistir üò¢';
  await sendToGoogleForms(form);
  form.style.display='none';
  const s=document.getElementById(declined?'rsvp-declined':'rsvp-success');
  s.classList.add('show');
  s.scrollIntoView({behavior:'smooth',block:'center'});
}

, 2800);
}


/* ‚îÄ‚îÄ Apertura del sobre ‚îÄ‚îÄ */
function openEnvelope(){
  const scene = document.getElementById('env-scene');
  const cover = document.getElementById('envelope-cover');
  const hint  = cover.querySelector('.seal-hint');
  if(hint) hint.style.display = 'none';

  scene.classList.add('opening');

  setTimeout(() => {
    cover.classList.add('fade-out');
  }, 1400);

  setTimeout(() => {
    cover.style.display = 'none';
    document.body.style.overflow = '';
  }, 2400);
}

</script>

</body>
</html>
